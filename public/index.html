<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Cloud Messenger</title>
    <style>
        /* –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ª–µ–≥–∫–æ–π —Å–º–µ–Ω—ã —Ç–µ–º */
        :root {
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --text-color: #1c1e21;
            --input-border: #dddfe2;
            --msg-bg: #f1f0f0;
            --primary-blue: #1877f2;
        }

        [data-theme="dark"] {
            --bg-color: #18191a;
            --card-bg: #242526;
            --text-color: #e4e6eb;
            --input-border: #3a3b3c;
            --msg-bg: #3a3b3c;
            --primary-blue: #2d88ff;
        }

        body { font-family: 'Segoe UI', sans-serif; background: var(--bg-color); color: var(--text-color); display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; transition: 0.3s; }
        .card { background: var(--card-bg); padding: 30px; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 350px; position: relative; }
        
        /* –ö–Ω–æ–ø–∫–∞ —Ç–µ–º */
        .theme-toggle { position: absolute; top: 15px; right: 15px; cursor: pointer; font-size: 20px; z-index: 100; }
        .theme-menu { 
            display: none; position: absolute; top: 40px; right: 10px; 
            background: var(--card-bg); border: 1px solid var(--input-border);
            border-radius: 8px; padding: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .theme-menu div { padding: 8px 15px; cursor: pointer; border-radius: 4px; }
        .theme-menu div:hover { background: var(--msg-bg); }

        h2 { text-align: center; }
        #chat-screen { display: none; width: 450px; }
        #login-screen, #auth-screen { display: none; }
        
        #chat { height: 400px; border: 1px solid var(--input-border); background: var(--card-bg); overflow-y: auto; padding: 15px; border-radius: 8px; margin-bottom: 10px; display: flex; flex-direction: column-reverse; }
        input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid var(--input-border); border-radius: 6px; box-sizing: border-box; background: var(--card-bg); color: var(--text-color); }
        button { width: 100%; padding: 12px; background: var(--primary-blue); color: white; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; }
        
        .msg-item { margin-bottom: 8px; padding: 10px; border-radius: 8px; background: var(--msg-bg); }
        .msg-user { color: var(--primary-blue); font-weight: bold; margin-right: 5px; }
        .header-chat { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .logout-btn { width: auto; padding: 5px 10px; background: #ff4d4d; font-size: 12px; }
    </style>
</head>
<body>

    <div class="theme-toggle" onclick="toggleThemeMenu()">üé®
        <div id="theme-menu" class="theme-menu">
            <div onclick="setTheme('light')">‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è</div>
            <div onclick="setTheme('dark')">üåô –¢–µ–º–Ω–∞—è</div>
        </div>
    </div>

    <div id="auth-screen" class="card">
        <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
        <input type="text" id="reg-user" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
        <input type="email" id="reg-email" placeholder="–ü–æ—á—Ç–∞">
        <input type="password" id="reg-pass" placeholder="–ü–∞—Ä–æ–ª—å">
        <input type="password" id="reg-confirm" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
        <button onclick="handleRegister()">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
        <div style="text-align:center; margin-top:15px; cursor:pointer; color:var(--primary-blue)" onclick="toggleAuth(true)">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π—Ç–∏</div>
    </div>

    <div id="login-screen" class="card">
        <h2>–í—Ö–æ–¥</h2>
        <input type="email" id="login-email" placeholder="–ü–æ—á—Ç–∞">
        <input type="password" id="login-pass" placeholder="–ü–∞—Ä–æ–ª—å">
        <button onclick="handleLogin()">–í–æ–π—Ç–∏</button>
        <div style="text-align:center; margin-top:15px; cursor:pointer; color:var(--primary-blue)" onclick="toggleAuth(false)">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
